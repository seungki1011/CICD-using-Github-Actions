> **ë¸”ë¡œê·¸ ì°¸ê³ **
>
> í•´ë‹¹ ë‚´ìš©ì€ [https://seungki1011.github.io/posts/cicd-github-action/](https://seungki1011.github.io/posts/cicd-github-action/)ì—ë„ í¬ìŠ¤íŒ… í–ˆìŠµë‹ˆë‹¤.

<br>

---

## ğŸ“Œ ëª©ì°¨

1. [ğŸŒ¿ ë¸Œëœì¹˜ ì„¤ëª…](https://github.com/seungki1011/CICD-using-Github-Actions/tree/main?tab=readme-ov-file#-%EB%B8%8C%EB%9E%9C%EC%B9%98-%EC%84%A4%EB%AA%85)
2. [ğŸ—£ï¸ GitHub Actions ì†Œê°œ](https://github.com/seungki1011/CICD-using-Github-Actions/tree/main?tab=readme-ov-file#%EF%B8%8F-github-actions-%EC%86%8C%EA%B0%9C)
3. [ğŸ¯ GitHub Actions ì£¼ìš” ê°œë…](https://github.com/seungki1011/CICD-using-Github-Actions/tree/main?tab=readme-ov-file#-github-actions-%EC%A3%BC%EC%9A%94-%EA%B0%9C%EB%85%90)
4. [ğŸš€ GitHub Actions ì‚¬ìš©ë²•](https://github.com/seungki1011/CICD-using-Github-Actions/tree/main?tab=readme-ov-file#-github-actions-%EC%82%AC%EC%9A%A9%EB%B2%95)
    * [ëŒ€ëµì ì¸ ê³¼ì •](https://github.com/seungki1011/CICD-using-Github-Actions/tree/main?tab=readme-ov-file#%EB%8C%80%EB%9E%B5%EC%A0%81%EC%9D%B8-%EA%B3%BC%EC%A0%95)
    * [ì˜ˆì‹œ](https://github.com/seungki1011/CICD-using-Github-Actions/tree/main?tab=readme-ov-file#%EC%98%88%EC%8B%9C)
    * [`uses` í•„ë“œ](https://github.com/seungki1011/CICD-using-Github-Actions/tree/main?tab=readme-ov-file#uses-%ED%95%84%EB%93%9C)
    * [`run` í•„ë“œ](https://github.com/seungki1011/CICD-using-Github-Actions/tree/main?tab=readme-ov-file#run-%ED%95%84%EB%93%9C)
5. [ğŸ—ƒï¸ ìºì‹±(Caching)](https://github.com/seungki1011/CICD-using-Github-Actions/tree/main?tab=readme-ov-file#%EF%B8%8F-%EC%BA%90%EC%8B%B1caching)
6. [âŒ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ì‚´í´ë³´ê¸°](https://github.com/seungki1011/CICD-using-Github-Actions/tree/main?tab=readme-ov-file#-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%8B%A4%ED%8C%A8-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0)
7. [â˜‘ï¸ ì¡°ê±´ë¬¸ ì‚¬ìš©í•˜ê¸°](https://github.com/seungki1011/CICD-using-Github-Actions/tree/main?tab=readme-ov-file#%EF%B8%8F-%EC%A1%B0%EA%B1%B4%EB%AC%B8-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0)
8. [ğŸ’¬ ìŠ¬ë™ìœ¼ë¡œ ì•Œë¦¼ ì„¤ì •í•˜ê¸°(Secrets ì‚¬ìš©)](https://github.com/seungki1011/CICD-using-Github-Actions/tree/main?tab=readme-ov-file#-%EC%8A%AC%EB%9E%99%EC%9C%BC%EB%A1%9C-%EC%95%8C%EB%A6%BC-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0secrets-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0)
    * [ìŠ¬ë™ ì±„ë„ ì¶”ê°€](https://github.com/seungki1011/CICD-using-Github-Actions/tree/main?tab=readme-ov-file#%EC%8A%AC%EB%9E%99-%EC%B1%84%EB%84%90-%EC%B6%94%EA%B0%80)
    * [ìŠ¬ë™ ì•± ìƒì„±: Webhook URL ë°œê¸‰](https://github.com/seungki1011/CICD-using-Github-Actions/tree/main?tab=readme-ov-file#%EC%8A%AC%EB%9E%99-%EC%95%B1-%EC%83%9D%EC%84%B1-webhook-url-%EB%B0%9C%EA%B8%89)
    * [ì‹œí¬ë¦¿ ë“±ë¡](https://github.com/seungki1011/CICD-using-Github-Actions/tree/main?tab=readme-ov-file#%EC%8B%9C%ED%81%AC%EB%A6%BF-%EB%93%B1%EB%A1%9D)
    * [ì›Œí¬í”Œë¡œìš° ì‘ì„±1: `slack-github-action`(ë²„ê·¸)](https://github.com/seungki1011/CICD-using-Github-Actions/tree/main?tab=readme-ov-file#%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%9E%91%EC%84%B11-slack-github-action%ED%98%84%EC%9E%AC-%EB%B2%84%EA%B7%B8-%EC%9E%88%EC%9D%8C)
    * [ì›Œí¬í”Œë¡œìš° ì‘ì„±2: `slack-github-action`(ë²„ê·¸ ìš°íšŒ)](https://github.com/seungki1011/CICD-using-Github-Actions/tree/main?tab=readme-ov-file#%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%9E%91%EC%84%B12-slack-github-action%EB%B2%84%EA%B7%B8-%EC%9A%B0%ED%9A%8C)
    * [ì›Œí¬í”Œë¡œìš° ì‘ì„±3: `action-slack`](https://github.com/seungki1011/CICD-using-Github-Actions/tree/main?tab=readme-ov-file#%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%9E%91%EC%84%B13-action-slack)

<br>

---

## ğŸŒ¿ ë¸Œëœì¹˜ ì„¤ëª…

* **[`main`](https://github.com/seungki1011/CICD-using-Github-Actions/tree/main)**: ì¡°ê±´ë¬¸ì„ ì ìš©í•˜ì§€ ì•Šì€ ì›Œí¬í”Œë¡œìš°
* **[`dev`](https://github.com/seungki1011/CICD-using-Github-Actions/tree/dev)**: `main`ê³¼ ë™ì¼
* **[`test`](https://github.com/seungki1011/CICD-using-Github-Actions/tree/test)**: `main`ê³¼ ë™ì¼. í•´ë‹¹ ë¸Œëœì¹˜ì— PRì„ ë„£ìœ¼ë©´ ì›Œí¬í”Œë¡œìš°ê°€ íŠ¸ë¦¬ê±°ë©ë‹ˆë‹¤.
* **[`using-if`](https://github.com/seungki1011/CICD-using-Github-Actions/tree/using-if)**: ì¡°ê±´ë¬¸ì„ ì‚¬ìš©í•œ ì›Œí¬í”Œë¡œìš°

<br>

ì•„ë˜ ë¸Œëœì¹˜ëŠ” `main`ì„ ê¸°ë°˜ìœ¼ë¡œ í•©ë‹ˆë‹¤.

* **[`slack/slack-github-action-bug`](https://github.com/seungki1011/CICD-using-Github-Actions/tree/slack/slack-github-action-bug)**: `slackapi/slack-github-action@v1.27.0`ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ë²„ê·¸ê°€ ìˆìŠµë‹ˆë‹¤.
* **[`slack/slack-github-action-workaround`](https://github.com/seungki1011/CICD-using-Github-Actions/tree/slack/slack-github-action-workaround)**: `slackapi/slack-github-action@v1.27.0`ì„ ì‚¬ìš©í•˜ì§€ë§Œ, ë²„ê·¸ë¥¼ ìš°íšŒí•œ ë°©ë²•ì…ë‹ˆë‹¤.
* **[`slack/action-slack`](https://github.com/seungki1011/CICD-using-Github-Actions/tree/slack/action-slack)**: `8398a7/action-slack`ì„ ì‚¬ìš©í•©ë‹ˆë‹¤

<br>

---

## ğŸ—£ï¸ GitHub Actions ì†Œê°œ

**GitHub Actions**ëŠ” GitHubì—ì„œ ì œê³µí•˜ëŠ” **ìë™í™” ë„êµ¬**ë¡œ, CI/CD(ì§€ì†ì  í†µí•© ë° ì§€ì†ì  ë°°í¬) íŒŒì´í”„ë¼ì¸ê³¼ ê°™ì€ **ìë™í™” ì›Œí¬í”Œë¡œìš°ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**. GitHub ActionsëŠ” GitHub ë¦¬í¬ì§€í† ë¦¬ì™€ í†µí•©ë˜ì–´ ìˆì–´, ê°œë°œìë“¤ì´ **Push**ë‚˜ **Pull Request**ì™€ ê°™ì€ **ì´ë²¤íŠ¸ì— ë”°ë¼ ìë™ìœ¼ë¡œ ì›Œí¬í”Œë¡œìš°ë¥¼ ì‹¤í–‰**í•˜ê³ , ì†Œí”„íŠ¸ì›¨ì–´ ë¹Œë“œ, í…ŒìŠ¤íŠ¸, ë°°í¬ ë“±ì˜ ê³¼ì •ì„ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

> **CI/CDì™¸ì˜ ì‘ì—…ì—ë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**
>
> ìœ„ì—ì„œë„ ì„¤ëª…í–ˆë“¯ì´ ê¹ƒí—™ ì´ë²¤íŠ¸ì™€ YAML ê¸°ë°˜ì˜ ìë™í™”ëœ ì›Œí¬í”Œë¡œìš°ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©ë˜ëŠ” ë„êµ¬ì´ë‹¤. CI/CDì™¸ì—ë„ ì—¬ëŸ¬ê°€ì§€ ìš©ë„ë¡œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
>
> * ì˜ˆì‹œ
>   * ìŠ¤ì¼€ì¥´ë§ ì‘ì—…: `schedule` ì´ë²¤íŠ¸ë¥¼ í™œìš©í•œ ì£¼ê¸°ì ì¸ ì‘ì—… ì„¤ì •
>   * í”„ë¡œì íŠ¸ ê´€ë¦¬: ì§€ë¼ì™€ ê°™ì€ ì´ìŠˆ íŠ¸ë˜í‚¹ ë„êµ¬ì™€ í†µí•©í•œ ì›Œí¬í”Œë¡œìš° ìƒì„±

<br>

ë‹¤ìŒì€ GitHub Actionsê°€ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” ëª‡ ê°€ì§€ ì‚¬ìš© ì¼€ì´ìŠ¤ì…ë‹ˆë‹¤.

* ê¹ƒí—™ íƒœê·¸, ë¦´ë¦¬ì¦ˆ ìë™ ì„¤ì •
* ìƒˆë¡œìš´ ë¸Œëœì¹˜ ìƒì„±ì‹œ íŠ¹ì • ì‘ì—… ì‹¤í–‰
* CI/CD íŒŒì´í”„ë¼ì¸ êµ¬í˜„
* ì¼ì • ì£¼ê¸° ë˜ëŠ” íŠ¹ì • ì¡°ê±´ì— ë”°ë¥¸ ë¬¸ì„œí™” ì‘ì—…

<br>

ì´ì™¸ì—ë„ ë‹¤ì–‘í•œ ì‚¬ìš© ì¼€ì´ìŠ¤ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.

> Github Actions ë¬¸ì„œ: [https://docs.github.com/ko/actions](https://docs.github.com/ko/actions)

<br>

---

## ğŸ¯ GitHub Actions ì£¼ìš” ê°œë…

1. **ì›Œí¬í”Œë¡œìš°(Workflow)**
   * Github Actionsì—ì„œ ìë™í™” ì‘ì—…ì˜ ì •ì˜ë¥¼ ë‹´ê³  ìˆëŠ” **YAML íŒŒì¼**
   * `.github/workflows/` ë””ë ‰í† ë¦¬ì— ì €ì¥í•´ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤
   * **Enviroment**
     * **ì›Œí¬í”Œë¡œìš°ê°€ ë°°í¬ë˜ëŠ” ëŒ€ìƒ**ì„ ê´€ë¦¬í•˜ëŠ” ê°œë…ìœ¼ë¡œ, ê°œë°œ, ìŠ¤í…Œì´ì§•, í”„ë¡œë•ì…˜ í™˜ê²½ì— ëŒ€í•´ ì„œë¡œ ë‹¤ë¥¸ ì„¤ì •ê³¼ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì ìš© ê°€ëŠ¥
     * í™˜ê²½ë³„ë¡œ ë°°í¬ ìŠ¹ì¸ ì ˆì°¨ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜, íŠ¹ì • Secretë¥¼ ì„¤ì • ê°€ëŠ¥
   * **Event**
     * ì›Œí¬í”Œë¡œìš°ê°€ ì‹¤í–‰ë˜ëŠ” íŠ¸ë¦¬ê±°ë¥¼ ì˜ë¯¸
     * `push`, `pull_request`, `schedule`ê³¼ ê°™ì€ ë‹¤ì–‘í•œ ì´ë²¤íŠ¸ê°€ ì¡´ì¬
   * **Jobs**
     * í•˜ë‚˜ì˜ **ì›Œí¬í”Œë¡œìš°ëŠ” ì—¬ëŸ¬ ê°œì˜ Jobìœ¼ë¡œ êµ¬ì„±**
     * Jobì€ **ë³‘ë ¬ë¡œ ì‹¤í–‰ ê°€ëŠ¥**
       * ì˜ˆë¥¼ ë“¤ì–´, í•˜ë‚˜ì˜ ì›Œí¬í”Œë¡œìš°ì—ì„œ ë¹Œë“œ, í…ŒìŠ¤íŠ¸, ë°°í¬ê°€ ê°ê° ë‹¤ë¥¸ Jobìœ¼ë¡œ ë³‘ë ¬ ìˆ˜í–‰ ê°€ëŠ¥
     * ì„œë¡œ ë‹¤ë¥¸ Jobì— ëŒ€í•œ **ì˜ì¡´ ê´€ê³„ì— ëŒ€í•´ ìˆœì°¨ ì‹¤í–‰ ê°€ëŠ¥**
   * **Step**
     * ê° **Jobì€ ì—¬ëŸ¬ Stepë¡œ ì´ë£¨ì–´ì§€ë©°**, ì´ Stepë“¤ì€ **ê°œë³„ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ìŠ¤í¬ë¦½íŠ¸(ëª…ë ¹ì–´) ë˜ëŠ” ì•¡ì…˜**
     * ì‰½ê²Œ ë§í•´ì„œ **Jobì—ì„œ ì‹¤í–‰ë˜ëŠ” ê°œë³„ ì‘ì—…**ì´ Step
2. **ì•¡ì…˜(Action)**
   * ì›Œí¬í”Œë¡œìš° ë‚´ì—ì„œ ì‹¤í–‰ë˜ëŠ” **ì‘ì—… ë‹¨ìœ„**
   * ì•¡ì…˜ì€ **ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì½”ë“œ ì¡°ê°(ì»´í¬ë„ŒíŠ¸)**ìœ¼ë¡œ, íŠ¹ì • í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì˜ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ê±°ë‚˜, í´ë¼ìš°ë“œì— ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ ì²˜ë¦¬ ê°€ëŠ¥
   * Github Marketplaceì—ì„œ ì‚¬ì „ ì •ì˜ëœ ë‹¤ì–‘í•œ ì•¡ì…˜ë“¤ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤
3. **ëŸ¬ë„ˆ(Runner)**
   * ì›Œí¬í”Œë¡œìš°ê°€ ì‹¤í–‰ë  ë•Œ, GitHub ActionsëŠ” í•´ë‹¹ **ì›Œí¬í”Œë¡œìš°ë¥¼ ëŸ¬ë„ˆë¼ëŠ” ê°€ìƒ ë¨¸ì‹ ì—ì„œ ì‹¤í–‰**í•œë‹¤
   * ëŸ¬ë„ˆëŠ” GitHubì—ì„œ ì œê³µí•˜ëŠ” **í˜¸ìŠ¤í‹°ë“œ ëŸ¬ë„ˆ** ë˜ëŠ” **ìì²´ í˜¸ìŠ¤íŒ… ëŸ¬ë„ˆ**ê°€ ì¡´ì¬
     * **í˜¸ìŠ¤í‹°ë“œ ëŸ¬ë„ˆ(GitHub Hosted Runner)**: **GitHubì—ì„œ ì œê³µí•˜ëŠ” ê¸°ë³¸ì ì¸ ëŸ¬ë„ˆ**ë¡œ, ì¼ë°˜ì ì¸ OS(ì˜ˆ: Ubuntu, Windows, macOS)ë¥¼ ì§€ì›í•˜ë©°, ê° ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ì‹œ ìƒˆë¡­ê²Œ ìƒì„±ë˜ëŠ” ê°€ìƒ ë¨¸ì‹ 
     * **ìì²´ í˜¸ìŠ¤íŒ… ëŸ¬ë„ˆ(Self-Hosted Runner)**: ì‚¬ìš©ìê°€ **ì§ì ‘ ëŸ¬ë„ˆë¥¼ ì„¤ì •í•˜ì—¬ ì‚¬ìš©**í•  ìˆ˜ ìˆìœ¼ë©°, ë” ë§ì€ ì œì–´ê¶Œì„ í•„ìš”ë¡œ í•  ë•Œ ìœ ìš©
       * ìì²´ ì„œë²„ë‚˜ IDCì—ì„œ ì‹¤í–‰ ê°€ëŠ¥
4. **ì‹œí¬ë¦¿(Secrets)**
   * API í‚¤ë‚˜ ë¹„ë°€ë²ˆí˜¸ ê°™ì€ **ë¯¼ê°í•œ ì •ë³´ë¥¼ ë³´ê´€í•˜ëŠ” ê¸°ëŠ¥**
   * ì›Œí¬í”Œë¡œìš°ì—ì„œ **Secrets**ë¡œ ì €ì¥ëœ ê°’ì€ **ë³´ì•ˆëœ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©**ë˜ë©°, ë¦¬í¬ì§€í† ë¦¬, í™˜ê²½, ì¡°ì§ ë“± ë‹¤ì–‘í•œ ìˆ˜ì¤€ì—ì„œ ì„¤ì • ê°€ëŠ¥

<br>

---

## ğŸš€ GitHub Actions ì‚¬ìš©ë²•

### ëŒ€ëµì ì¸ ê³¼ì •

Github Actionìœ¼ë¡œ ì›Œí¬í”Œë¡œìš°ë¥¼ ì •ì˜í•´ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” í¬ê²Œ ë‹¤ìŒì˜ ë‹¨ê³„ë¥¼ ê±°ì¹©ë‹ˆë‹¤.

1. **YAML íŒŒì¼ ì‘ì„±**

   * ì‚¬ìš©í•  ì›Œí¬í”Œë¡œìš°ë¥¼ `.github/workflows/` ë””ë ‰í† ë¦¬ì— **YAML** íŒŒì¼ë¡œ ì‘ì„±í•©ë‹ˆë‹¤
   * ë‹¤ìŒì˜ ìˆœì„œì˜ ë‚´ìš©ì„ í•´ë‹¹ íŒŒì¼ì— ì‘ì„±í•©ë‹ˆë‹¤.

2. **Triggers(Event)**

   * ì›Œí¬í”Œë¡œìš°ê°€ ì‹¤í–‰ë˜ëŠ” ì´ë²¤íŠ¸ë¥¼ ì •í•©ë‹ˆë‹¤

   * ì˜ˆ: `push`, `pull_request`

3. **Jobs**

   * ì›Œí¬í”Œë¡œìš°ëŠ” ì—¬ëŸ¬ê°œì˜ Jobìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤
   * ê° Jobì€ ë³‘ë ¬, ìˆœì°¨, ì˜ì¡´ì„±ì— ì˜í•œ ìˆœì°¨ì— ë”°ë¼ ì‹¤í–‰ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤
   * ê° Jobì€ ì„œë¡œ ë…ë¦½ëœ ëŸ¬ë„ˆ(Runner) í™˜ê²½ì—ì„œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì—, ì–´ë–¤ í™˜ê²½(ìš´ì˜ì²´ì œ)ì—ì„œ ì‹¤í–‰í• ì§€ ëª…ì‹œí•´ì•¼ í•©ë‹ˆë‹¤

4. **Steps**

   * Jobì•ˆì—ì„œ Stepì„ ì •ì˜í•˜ì—¬ ê° ë‹¨ê³„ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
   * ê° Stepì€ `run`ì„ ì‚¬ìš©í•œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ê±°ë‚˜, `uses`ë¥¼ ì‚¬ìš©í•œ ì•¡ì…˜ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤

5. **Secrets**

   * í•„ìš”í•œ ê²½ìš° ë¯¼ê°í•œ ì •ë³´(SSH, API í‚¤)ëŠ” Github Secretsì— ì €ì¥í•´ì„œ, ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•©ë‹ˆë‹¤

<br>

ì‹¤ì œ ì˜ˆì‹œë¥¼ í†µí•´ ì•Œì•„ë´…ì‹œë‹¤.

í˜„ì¬ **ìë°”17ë¥¼ ì‚¬ìš©í•œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰**ì¤‘ì´ê³  ë‹¤ìŒê³¼ ê°™ì€ CI íŒŒì´í”„ë¼ì¸ì„ êµ¬í˜„í•œë‹¤ê³  ê°€ì •í•´ë´…ì‹œë‹¤.

* `test` ë¸Œëœì¹˜ë¡œ PR ìš”ì²­ì„ í•˜ëŠ” ê²½ìš° íŠ¸ë¦¬ê±° ë©ë‹ˆë‹¤
* `build`ì™€ `test`ë¼ëŠ” 2 ê°œì˜ Jobìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ì´ë•Œ `test`ëŠ” `build`ê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì–´ì•¼ ìˆ˜í–‰ë©ë‹ˆë‹¤
* ê° Jobì˜ ëª©ì ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤
  * `build`: Gradle ë¹Œë“œ
  * `test`: Gradle í…ŒìŠ¤íŠ¸
* `build` ë˜ëŠ” `test`ê°€ **ì‹¤íŒ¨í•˜ë©´ CI íŒŒì´í”„ë¼ì¸ë„ ì‹¤íŒ¨í•˜ê³  PRì„ ìˆ˜í–‰í•˜ì§€ ëª»í•©ë‹ˆë‹¤**

<br>

---

### ì˜ˆì‹œ 1

ì›Œí¬í”Œë¡œìš°ë¥¼ ì •ì˜í•´ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ `.github/workflows/` ì•„ë˜ì— `ci.yml`ì´ë¼ëŠ” íŒŒì¼ì„ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤.

`ci.yml`

```yaml
# ì›Œí¬í”Œë¡œìš°ì˜ ì´ë¦„ì„ ì§€ì •í•©ë‹ˆë‹¤
# ëŒ€ì‹œë³´ë“œì—ì„œ ì›Œí¬í”Œë¡œìš°ë¥¼ êµ¬ë¶„í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤
name: CI Pipeline

# Event
on:
  pull_request: # Pull Requestê°€ test ë¸Œëœì¹˜ë¡œ ë“¤ì–´ì˜¬ ë•Œ ì‹¤í–‰
    branches:
      - test

# Jobs: í•„ìš”í•œ Jobì„ ë³‘ë ¬ ë˜ëŠ” (ì˜ì¡´ì„±ì— ì˜í•´)ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰
jobs:
  # Build Job
  build:
    runs-on: ubuntu-latest

    steps:
      # 1. ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ì†ŒìŠ¤ ì½”ë“œë¥¼ ì²´í¬ì•„ì›ƒ(ë³µì œ)
      - name: Checkout code
        uses: actions/checkout@v3

      # 2. Gradle ë¼ì´ë¸ŒëŸ¬ë¦¬ ìºì‹±
      - name: Cache Gradle packages
        uses: actions/cache@v3
        with:
          path: |
            ~/.gradle/caches
            ~/.gradle/wrapper
          key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle*', '**/gradle-wrapper.properties') }}
          restore-keys: |
            ${{ runner.os }}-gradle-

      # 3. Java 17 ì„¤ì¹˜
      - name: Set up JDK 17
        uses: actions/setup-java@v3
        with:
          distribution: 'temurin'
          java-version: '17'
          
      # 4. gradlewì— ê¶Œí•œ ë¶€ì—¬
      - name: Grant execute permission for gradlew
        run: chmod +x gradlew

      # 5. ì˜ì¡´ì„± ì„¤ì¹˜ ë° ë¹Œë“œ
      - name: Build with Gradle
        run: ./gradlew build --no-daemon

  # Test Job
  # ë¹Œë“œì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ Jobì€ ì œì™¸í•´ë„ ë©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ needsë¥¼ ì„¤ëª…í•˜ê¸° ìœ„í•´ í¸ì˜ìƒ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.
  test:
    runs-on: ubuntu-latest
    needs: build  # build Jobì´ ì„±ê³µí•´ì•¼ ì‹¤í–‰
    
    steps:
      # ê¸°ì¡´ ì²´í¬ì•„ì›ƒ, JDK ì„¤ì¹˜ ê³¼ì •
      - name: Checkout code
        uses: actions/checkout@v3
      
      - name: Set up JDK 17
        uses: actions/setup-java@v3
        with:
          distribution: 'temurin'
          java-version: '17'
          
      # 6. í…ŒìŠ¤íŠ¸ ì‹¤í–‰
      - name: Run tests
        run: ./gradlew test --no-daemon
```

* **Event**

  * ```yaml
    on: # ì›Œí¬í”Œë¡œìš°ê°€ ì‹¤í–‰ë  ì¡°ê±´ì„ ì •ì˜í•©ë‹ˆë‹¤
      pull_request: # PRì„ ì¡°ê±´ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤
        branches:
          - test # test ë¸Œëœì¹˜ë¡œ PRì´ ì—´ë¦¬ë©´ ì‹¤í–‰ë˜ë„ë¡ ì§€ì •
    ```

* **Jobs**

  * ```yaml
    jobs: # ì•„ë˜ ê³„ì¸µì— ìˆ˜í–‰í•  Jobì„ ì •ì˜í•©ë‹ˆë‹¤
      # (1)buildë¼ëŠ” Job
      build:
        runs-on: ubuntu-latest # í•´ë‹¹ Jobì˜ ëŸ¬ë„ˆ í™˜ê²½ì„ ì§€ì •í•©ë‹ˆë‹¤
        # ì•„ë˜ì— buildì˜ Stepë“¤ì„ ì •ì˜í•©ë‹ˆë‹¤
        step:
          # ì•„ë˜ ê³„ì¸µì— ìˆ˜í–‰í•  Stepì„ ì •ì˜í•©ë‹ˆë‹¤
        	# Step ì²´í¬ì•„ì›ƒ, JDK ì„¤ì •, ìºì‹±, ê¶Œí•œ, ë¹Œë“œ...
        	
      # (2)testë¼ëŠ” Job
      test:
        runs-on: ubuntu-latest
        needs: build  # buildê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì–´ì•¼ ìˆ˜í–‰ëœë‹¤ëŠ” ì˜ë¯¸
    ```

  * `runs-on`: **Job**ì´ ì‹¤í–‰ë  í™˜ê²½ì„ ì§€ì •í•©ë‹ˆë‹¤. ìœ„ ì˜ˆì‹œì˜ ê²½ìš° `ubuntu-latest`ë¥¼ í†µí•´ ìµœì‹  ë²„ì „ì˜ Ubuntu í™˜ê²½ì—ì„œ ë™ì‘í•˜ë„ë¡ í•©ë‹ˆë‹¤. **Jobë“¤ì€ ì„œë¡œ ë³„ê°œì˜ í™˜ê²½ì„ ì‚¬ìš©**í•©ë‹ˆë‹¤. 

  * `needs`: **Job**ì˜ ì˜ì¡´ì„±ì„ ì§€ì •í•©ë‹ˆë‹¤

  * ì˜ì¡´í•˜ëŠ” **Job**ì„ ëª…ì‹œì ìœ¼ë¡œ **ì§€ì •í•˜ì§€ ì•ŠëŠ” ê²½ìš° ë³‘ë ¬ë¡œ ìˆ˜í–‰**ë©ë‹ˆë‹¤

* **Steps**

  * ```yaml
    # í•˜ë‚˜ì˜ Jobì•ˆì— ì •ì˜ëœ Stepë“¤ì€ ê¸°ë³¸ì ìœ¼ë¡œ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤
    steps:
          # 1. ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ì†ŒìŠ¤ ì½”ë“œë¥¼ ì²´í¬ì•„ì›ƒ(ë³µì œ)
          - name: Checkout code # nameìœ¼ë¡œ ê° Stepì˜ ì´ë¦„ì„ ë¶€ì—¬í•©ë‹ˆë‹¤
            uses: actions/checkout@v3 # usesë¥¼ í†µí•´ ì•¡ì…˜ì„ í˜¸ì¶œí•©ë‹ˆë‹¤
    
          # 2. Gradle ë¼ì´ë¸ŒëŸ¬ë¦¬ ìºì‹±
          - name: Cache Gradle packages
            uses: actions/cache@v3
            with: # withë¥¼ í†µí•´ ì•¡ì…˜ì— ëŒ€í•œ ì¶”ê°€ì ì¸ ì„¤ì •ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
              path: |
                ~/.gradle/caches
                ~/.gradle/wrapper
              key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle*', '**/gradle-wrapper.properties') }}
              restore-keys: |
                ${{ runner.os }}-gradle-
    
          # 3. Java 17 ì„¤ì¹˜(JDK ì„¤ì¹˜)
          - name: Set up JDK 17
            uses: actions/setup-java@v3
            with:
              distribution: 'temurin'
              java-version: '17'
              
          # 4. gradlewì— ê¶Œí•œ ë¶€ì—¬
          - name: Grant execute permission for gradlew
            run: chmod +x gradlew # runìœ¼ë¡œ ì§ì ‘ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
    
          # 5. ì˜ì¡´ì„± ì„¤ì¹˜ ë° ë¹Œë“œ
          - name: Build with Gradle
            run: ./gradlew build --no-daemon
    ```

  * `steps`: ì•„ë˜ ê³„ì¸µì— ìˆœì°¨ì ìœ¼ë¡œ ìˆ˜í–‰í•  **Step**ë“¤ì„ ëª…ì‹œí•©ë‹ˆë‹¤

  * `name`: **Step**ì— ë¶€ì—¬í•  ì´ë¦„ì…ë‹ˆë‹¤. GitHub Action ë¡œê·¸ì— í‘œì‹œë©ë‹ˆë‹¤.

  * `uses`: **ì•¡ì…˜(Action)ì„ í˜¸ì¶œ**í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤

  * `run`: **ì§ì ‘ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰**í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤

  * `id`: ì˜ˆì‹œì—ì„œ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì§€ë§Œ `id`ë¥¼ ë¶€ì—¬í•´ì„œ ë‹¤ë¥¸ **Step**ì´ `id`ë¥¼ ì‚¬ìš©í•´ì„œ í•´ë‹¹ `id`ì˜ **Step**ì˜ ì¶œë ¥ê°’ì´ ìƒíƒœë¥¼ ì°¸ì¡°í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

---

### `uses` í•„ë“œ

**`uses` í•„ë“œë¥¼ ìì„¸íˆ ì‚´í´ë³´ì.**

`uses` í•„ë“œëŠ” GitHub Actionsì˜ ì›Œí¬í”Œë¡œìš° íŒŒì¼ì—ì„œ **ë‹¤ë¥¸ ì‚¬ëŒì´ ì‘ì„±í•œ ì•¡ì…˜(Action)ì„ í˜¸ì¶œ**í•  ë•Œ ì‚¬ìš©ë˜ëŠ” í•„ë“œì…ë‹ˆë‹¤. ì¦‰, `uses` í•„ë“œë¥¼ í†µí•´ **GitHub Marketplaceì— ë“±ë¡ëœ ì•¡ì…˜ì´ë‚˜ ê³µìš© ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ì œê³µí•˜ëŠ” ì•¡ì…˜ì„ ê°€ì ¸ì™€ì„œ ì‚¬ìš©**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  

ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì¡°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

```yaml
uses: {repository}@{version, branch, commit}
```

* **repository**: ì•¡ì…˜ì´ ìœ„ì¹˜í•œ ë¦¬í¬ì§€í† ë¦¬ì˜ ê²½ë¡œë¥¼ ì§€ì •í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ `actions/checkout`ì€ `actions`ë¼ëŠ” ì‚¬ìš©ì ë˜ëŠ” ì¡°ì§ì´ ë§Œë“  `checkout`ì´ë¼ëŠ” ë¦¬í¬ì§€í† ë¦¬ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.
* **version, branch, commit**: ì•¡ì…˜ì˜ íŠ¹ì • ë²„ì „(`@v2`), ë¸Œëœì¹˜(`@main`), ë˜ëŠ” ì»¤ë°‹ í•´ì‹œ(`@a1b2c3d4`)ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤

<br>

ì •ë¦¬í•˜ìë©´ `uses` í•„ë“œë¥¼ í†µí•´ì„œ íŠ¹ì • **ì•¡ì…˜ì„ ì¬ì‚¬ìš©**í•˜ê³  í•´ë‹¹ **ì•¡ì…˜ì— ëŒ€í•œ ë²„ì „ ì§€ì •**ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

> **ì•¡ì…˜ ì»¤ìŠ¤í„°ë§ˆì´ì§•**
>
> ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆí•˜ê³  ì‹¶ì€ ì•¡ì…˜ì˜ ë ˆí¬ì§€í† ë¦¬ë¥¼ í¬í¬í•˜ê³ , ì»¤ìŠ¤í…€ í›„ì— ê¸°ì¡´ ì‚¬ìš©ì ë˜ëŠ” ì¡°ì§ ëŒ€ì‹  ë‚´ ê¹ƒí—™ ì•„ì´ë””ë¥¼ ì‚¬ìš©í•˜ë©´ ì»¤ìŠ¤í…€í•œ ì•¡ì…˜ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
>
> * ì˜ˆ: `slackapi/slack-github-action`ì„ í¬í¬í•˜ê³  í•„ìš”í•œ ë¶€ë¶„ì„ ì»¤ìŠ¤í„°ë§ˆì´ì§• í›„ì— `myrespository/slack-github-action` ê°™ì€ í˜•íƒœë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤

<br>

---

### `run` í•„ë“œ

ì´ë²ˆì—ëŠ” **`run` í•„ë“œë¥¼ ìì„¸íˆ ì‚´í´ë´…ì‹œë‹¤.**

`run` í•„ë“œëŠ” GitHub Actionsì˜ ì›Œí¬í”Œë¡œìš°ì—ì„œ **ì§ì ‘ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰**í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤. ì£¼ë¡œ **ì‰˜ ìŠ¤í¬ë¦½íŠ¸ë‚˜ ë‹¨ì¼ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ëŠ” ë° ì‚¬ìš©**ë˜ë©°, CI/CD íŒŒì´í”„ë¼ì¸ì˜ ë‹¤ì–‘í•œ ë‹¨ê³„ì—ì„œ ì»¤ìŠ¤í…€ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. `run` í•„ë“œë¥¼ í†µí•œ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì„œ **ë¹Œë“œ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë¹Œë“œí•˜ê±°ë‚˜ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

ì—¬ëŸ¬ ëª…ë ¹ì–´ë¥¼ í•œë²ˆì— ì‹¤í–‰í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.

```yaml
# í•œë²ˆì— ì—¬ëŸ¬ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ëŠ” ì˜ˆì‹œ
- name: Install dependencies and build
  run: |
    npm install
    npm run build
```

<br>

---

## ğŸ—ƒï¸ ìºì‹±(Caching)

CI íŒŒì´í”„ë¼ì¸ì—ì„œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ìºì‹±í•˜ëŠ” ê²ƒì€ **ë¹Œë“œ ì‹œê°„ì„ ë‹¨ì¶•**í•˜ê³  **ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ì„ ì¤„ì´ëŠ” ë° íš¨ê³¼ì **ì…ë‹ˆë‹¤. íŠ¹íˆ, Gradleê³¼ ê°™ì€ ë¹Œë“œ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì˜ì¡´ì„± **ìºì‹±ì„ í†µí•´ ë§¤ë²ˆ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë‹¤ì‹œ ë‹¤ìš´ë¡œë“œí•˜ì§€ ì•Šë„ë¡** í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ìºì‹±ì€ ìºì‹œ ì•¡ì…˜ì¸ `actions/cache`ë¥¼ í†µí•´ì„œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

```yaml
- name: Cache Gradle packages
  uses: actions/cache@v3 # GitHubì—ì„œ ì œê³µí•˜ëŠ” ì•¡ì…˜ì¸ cache@v3 ì‚¬ìš©
  with:
    path: | # ìºì‹œ ê²½ë¡œ ì§€ì •
      ~/.gradle/caches
      ~/.gradle/wrapper
    key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle*', '**/gradle-wrapper.properties') }}
    restore-keys: |
      ${{ runner.os }}-gradle-
```

* `path`: ìºì‹±í•  ê²½ë¡œë¥¼ ì§€ì •í•©ë‹ˆë‹¤
  * `~/.gradle/caches`: Gradleì´ ë‹¤ìš´ë¡œë“œí•œ ì˜ì¡´ì„±(ë¼ì´ë¸ŒëŸ¬ë¦¬)ì´ ì €ì¥ë˜ëŠ” ê²½ë¡œ
  * `~/.gradle/wrapper`: Gradle ë˜í¼ì˜ ìºì‹œ ê²½ë¡œ

<br>

**`key`ì™€ ìºì‹œ ë¬´íš¨í™”**ì— ëŒ€í•´ì„œ ì•Œì•„ë´…ì‹œë‹¤.

```yaml
key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle*', '**/gradle-wrapper.properties') }}
```

* `key`ëŠ” ë‹¤ìŒì˜ ì—­í• ì„ ê°€ì§‘ë‹ˆë‹¤
  * **ìºì‹œ ì‹ë³„**: `key`ëŠ” ì €ì¥ëœ ìºì‹œë¥¼ ì‹ë³„í•˜ê³  ê²€ìƒ‰í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ë™ì¼í•œ `key`ë¥¼ ê°€ì§„ ìºì‹œê°€ ì¡´ì¬í•˜ë©´, í•´ë‹¹ ìºì‹œê°€ ë³µì›ë©ë‹ˆë‹¤.
  * **ìºì‹œ ì—…ë°ì´íŠ¸**: ìºì‹œë¥¼ ì €ì¥í•  ë•Œ `key`ë¥¼ ì‚¬ìš©í•˜ì—¬ ê¸°ì¡´ ìºì‹œì™€ êµ¬ë¶„í•©ë‹ˆë‹¤. `key`ê°€ ë³€ê²½ë˜ë©´ ìƒˆë¡œìš´ ìºì‹œê°€ ìƒì„±ë©ë‹ˆë‹¤.

* **ìºì‹œ ë¬´íš¨í™”**
  * í”„ë¡œì íŠ¸ì˜ **ì˜ì¡´ì„±ì´ë‚˜ Gradle ì„¤ì • íŒŒì¼ì´ ë³€ê²½**ë  ê²½ìš°, **ì´ì „ ìºì‹œê°€ ë” ì´ìƒ ìœ íš¨í•˜ì§€ ì•Šê²Œ ë©ë‹ˆë‹¤**. ì˜ˆë¥¼ ë“¤ì–´, `build.gradle` íŒŒì¼ì´ë‚˜ `gradle-wrapper.properties` **íŒŒì¼ì´ ìˆ˜ì •ë˜ë©´ ìƒˆë¡œìš´ ìºì‹œê°€ í•„ìš”**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  * ì´ ì„¤ì •ì—ì„œëŠ” `build.gradle`, `settings.gradle`, `gradle-wrapper.properties` íŒŒì¼ì˜ í•´ì‹œ ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ `key`ë¥¼ ìƒì„±í•©ë‹ˆë‹¤ë‹¤. ì´ëŸ¬í•œ **íŒŒì¼ì´ ë³€ê²½ë˜ë©´ í•´ì‹œ ê°’ì´ ë°”ë€Œê³ , ìºì‹œ í‚¤ë„ ë³€ê²½ë˜ë©´ì„œ ìºì‹œê°€ ë¬´íš¨í™”**ë©ë‹ˆë‹¤.

<br>

```yaml
restore-keys: |
      ${{ runner.os }}-gradle-
```

* **`restore-keys`**
  * `key`ì™€ **ì •í™•íˆ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ê²½ìš°ì—ë„ ìœ ì‚¬í•œ í‚¤ë¥¼ ê°€ì§„ ìºì‹œë¥¼ ë³µì›**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
  * **`key`ì™€ ë¹„ìŠ·í•œ ê°’ì„ ê°€ì§„ ìºì‹œë¥¼ ì°¾ê¸° ìœ„í•œ ë³´ì¡° ì—­í• **ì„ í•œë‹¤ê³  ë³´ë©´ ë©ë‹ˆë‹¤

* `${{ runner.os }}-gradle-`ì´ë¼ëŠ” prefix ê¸°ì¤€ìœ¼ë¡œ, ìºì‹œì— ì €ì¥ëœ `key` ì¤‘ì—ì„œ prefixë¥¼ í¬í•¨í•˜ëŠ” `key`ë¥¼ ì°¾ê³  ê°€ì¥ ìµœê·¼ì˜ ìºì‹œë¥¼ ë³µì›í•©ë‹ˆë‹¤

<br>

ì •ë¦¬í•˜ìë©´ ìºì‹œ ì„¤ì •ì„ í†µí•´ì„œ ë‹¤ìŒì˜ íš¨ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

* **ë¹Œë“œ ì‹œê°„ ë‹¨ì¶•**: ìºì‹œëœ ì˜ì¡´ì„±ì„ ì¬ì‚¬ìš©í•˜ì—¬ ì˜ì¡´ì„± ë‹¤ìš´ë¡œë“œ ì‹œê°„ì„ ì¤„ì´ê³ , ì „ì²´ ë¹Œë“œ ì‹œê°„ì„ ë‹¨ì¶•
* **ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ ì ˆì•½**: ì˜ì¡´ì„±ì„ ë§¤ë²ˆ ë‹¤ìš´ë¡œë“œí•˜ì§€ ì•Šê³ , ìºì‹œì—ì„œ ë³µì›í•¨ìœ¼ë¡œì¨ ë„¤íŠ¸ì›Œí¬ ì‚¬ìš©ëŸ‰ì„ ì¤„ì„

<br>

> **`gradle/gradle-build-action`ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤?**
>
> ì´ ì•¡ì…˜ì€ `gradle`ì—ì„œ ì œê³µí•˜ëŠ” ì•¡ì…˜ì…ë‹ˆë‹¤. Gradleì„ ì‚¬ìš©í•´ì„œ ë¹Œë“œí•˜ëŠ”ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤. í•´ë‹¹ ì•¡ì…˜ì„ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒì˜ ì´ì ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
>
> * `run`ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  Gradle ê´€ë ¨ ì„¤ì •ê³¼ ëª…ë ¹ì–´ë¥¼ ë” ì‰½ê²Œ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤
> * ê¸°ì¡´ì˜ `actions/cache`ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ìºì‹± ê´€ë ¨ ì„¤ì •ì„ í•  ìˆ˜ ìˆë‹¤
>
> <br>
>
> ê°„ë‹¨íˆ ì‚¬ìš©ë²•ì„ ì•Œì•„ë´…ì‹œë‹¤.
>
> ```yaml
> - name: Build with Gradle
>   uses: gradle/gradle-build-action@v2
>   with:
> 	  arguments: build
> 	  cache-disabled: false 
> ```
>
> * `cache-disabled`: ìºì‹œë¥¼ ë¹„í™œì„±í™” í•  ìˆ˜ ìˆëŠ” ì˜µì…˜. ê¸°ë³¸ê°’ì´ `false`ì…ë‹ˆë‹¤.
>
> <br>
>
> ```yaml
> - name: Build with Gradle
>   uses: gradle/gradle-build-action@v2
>   with:
> 	  arguments: build
> 	  cache-read-only: ${{ github.ref != 'refs/heads/main' && github.ref != 'refs/heads/develop' }}
> ```
>
> * `cache-read-only`: `true`ì¼ ê²½ìš° ìºì‹œë¥¼ ì½ê¸°ë§Œ í•˜ê³  ì €ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. `false`ì¼ ê²½ìš° ìºì‹œ ì½ê¸°/ì €ì¥ ëª¨ë‘ ìˆ˜í–‰í•©ë‹ˆë‹¤.
>   * ìœ„ ì˜ˆì‹œì—ì„œëŠ” `main`ê³¼ `develop` ë¸Œëœì¹˜ì¼ ë•Œë§Œ `false`ë¡œ ì„¤ì •í•©ë‹ˆë‹¤
>
> <br>
>
> ìºì‹œ ì•¡ì…˜ê³¼ Gradle ë¹Œë“œ ëª…ë ¹ì–´ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì§€ ì•Šê³  `gradle-build-action`ìœ¼ë¡œ í•œë²ˆì— ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

---

## âŒ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ì‚´í´ë³´ê¸°

í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•˜ë„ë¡ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ê³ `dev` ë¸Œëœì¹˜ì—ì„œ `test` ë¸Œëœì¹˜ë¡œ PRì„ ì§„í–‰í•˜ë©´ ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚˜ëŠ”ì§€ í™•ì¸í•´ë´…ì‹œë‹¤.

<br>

![cifail1](./img/README/cifail1.png)

<p align="center">CI íŒŒì´í”„ë¼ì¸ build ì‹¤íŒ¨</p>

**í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ì‹¤íŒ¨í•˜ë‹ˆ ë¹Œë“œë„ ì‹¤íŒ¨**í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `test` Jobë„ `build`ì— ì˜ì¡´í•˜ê³  ìˆê¸° ë•Œë¬¸ì— `build`ì—ì„œ ì‹¤íŒ¨í•˜ë‹ˆ `test`ë„ ìˆ˜í–‰ë˜ì§€ ëª»í•©ë‹ˆë‹¤.

ë¡œê·¸ë¥¼ ì‚´í´ë´…ì‹œë‹¤.

<br>

![cifail2](./img/README/cifail2.png)

<p align="center">í†µê³¼í•œ Stepê³¼ ì‹¤íŒ¨í•œ Stepì„ í™•ì¸ ê°€ëŠ¥</p>

![cifail2](./img/README/cifaillog.png)

<p align="center">í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ì‹¤íŒ¨í–ˆë‹¤ëŠ” ê²ƒì„ í™•ì¸ ê°€ëŠ¥</p>

<br>

í˜„ì¬ ìƒí™©ì€ `dev` â†’ `test`ë¡œ **PR ìš”ì²­ ì¤‘ì— CI íŒŒì´í”„ë¼ì¸ì´ ì‹¤íŒ¨í•˜ì—¬ PR í†µê³¼ê°€ ì•ˆë˜ëŠ” ìƒí™©**ì…ë‹ˆë‹¤. ì´ë²ˆì—ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•˜ë„ë¡ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ê³ , `dev` ë¸Œëœì¹˜ë¡œ í‘¸ì‹œë¥¼ ë„£ì–´ë´…ì‹œë‹¤.

<br>

![cifail2](./img/README/cigood.png)

<p align="center">í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ê¹¨ì§€ì§€ ì•Šê¸° ë•Œë¬¸ì— ì´ë²ˆì—” ì„±ê³µ!</p>

<br>

---

## â˜‘ï¸ ì¡°ê±´ë¬¸ ì‚¬ìš©í•˜ê¸°

ì¡°ê±´ë¬¸ì„ ì‚¬ìš©í•´ì„œ íŠ¹ì • ë¸Œëœì¹˜ì— ëŒ€í•´ì„œë§Œ ì‹¤í–‰ë˜ëŠ” Jobì„ ì •ì˜í•´ë´…ì‹œë‹¤. ë‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì´ë¼ê³  ê°€ì •í•©ì‹œë‹¤.

* ëª¨ë“  ë¸Œëœì¹˜ì— ëŒ€í•´ì„œ PR ìš”ì²­ì´ ë“¤ì–´ê°€ë©´ í•˜ë©´ `build` Job ìˆ˜í–‰
* `dev` ë¸Œëœì¹˜ì— í‘¸ì‹œê°€ ì¼ì–´ë‚˜ë©´ `test` Job ìˆ˜í–‰

<br>

```yaml
name: CI Pipeline

on:
  pull_request:
    branches:
      - '**'  # ëª¨ë“  ë¸Œëœì¹˜ì— ëŒ€í•´ PRì´ ìƒì„±ë  ë•Œ ì‹¤í–‰

  push:
    branches:
      - dev  # dev ë¸Œëœì¹˜ì— í‘¸ì‹œë  ë•Œ ì‹¤í–‰

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
			# ê¸°ì¡´ Stepë“¤
			# ì²´í¬ì•„ì›ƒ, JDK ì„¤ì¹˜, ìºì‹±, ê¶Œí•œ...

      - name: Build with Gradle
        run: ./gradlew build --no-daemon

  test:
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/dev'  # dev ë¸Œëœì¹˜ë¡œ í‘¸ì‹œë  ë•Œë§Œ ì‹¤í–‰í•˜ëŠ” ì¡°ê±´ë¬¸
    steps:
			# ê¸°ì¡´ Stepë“¤
			# ì²´í¬ì•„ì›ƒ, JDK ì„¤ì¹˜...

      - name: Run tests
        run: ./gradlew test --no-daemon
```

* `if:`ë¥¼ í†µí•´ì„œ ì¡°ê±´ë¬¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
* `if: github.ref == 'refs/heads/dev'`: `dev` ë¸Œëœì¹˜ë¡œ í‘¸ì‹œë  ë•Œë§Œ í•´ë‹¹ Jobì´ ì‹¤í–‰ë˜ë„ë¡ í•©ë‹ˆë‹¤

<br>

ìœ„ì˜ ì¼€ì´ìŠ¤ ë§ê³ ë„ ë‹¤ìŒê³¼ ê°™ì€ ì¼€ì´ìŠ¤ì—ì„œë„ í™œìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.

* **ìƒíƒœ ê¸°ë°˜ì˜ ì¡°ê±´ë¬¸**
  * `success()`: ì´ì „ ëª¨ë“  Stepì´ ì„±ê³µí•œ ê²½ìš° ì°¸(`true`)
  * `failure()`: ì´ì „ Step ì¤‘ í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨í•œ ê²½ìš° ì°¸(`true`)
  * `always()`: ëª¨ë“  ì¡°ê±´ì— ê´€ê³„ì—†ì´ í•­ìƒ ì°¸(`true`)
  * `cancelled()`: ì›Œí¬í”Œë¡œìš°ê°€ ì·¨ì†Œëœ ê²½ìš° ì°¸(`true`)
* **ë¸Œëœì¹˜ ê¸°ë°˜ ì¡°ê±´ë¬¸**
  * `github.ref`: ì°¸ì¡°ë¥¼ ë‚˜íƒ€ë‚´ë©°, íŠ¹ì • ë¸Œëœì¹˜ë‚˜ íƒœê·¸ì—ì„œë§Œ **Step**ì„ ì‹¤í–‰í•˜ë„ë¡ ì¡°ê±´ì„ ì„¤ì •í•©ë‹ˆë‹¤
  * ì˜ˆì‹œ: `github.ref == 'refs/heads/main'` (main ë¸Œëœì¹˜ì—ì„œë§Œ ì‹¤í–‰)
* **í™˜ê²½ ë³€ìˆ˜ ë˜ëŠ” ì‹œí¬ë¦¿ ê¸°ë°˜ ì¡°ê±´ë¬¸**
  * í™˜ê²½ ë³€ìˆ˜ë‚˜ ì‹œí¬ë¦¿ ê°’ì„ ë¹„êµí•˜ì—¬ ì¡°ê±´ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
  * ì˜ˆì‹œ: `if: env.MY_ENV_VAR == 'production'`
  * ë‹¹ì—°íˆ `env`ì— í™˜ê²½ ë³€ìˆ˜ë¥¼ ì •ì˜í•˜ê±°ë‚˜, ì‹œí¬ë¦¿ì— ë“±ë¡í•´ì•¼ í•©ë‹ˆë‹¤
* **ê²°ê³¼ ê¸°ë°˜ ì¡°ê±´ë¬¸**
  * ì´ì „ `Job`ì˜ ê²°ê³¼ì— ë”°ë¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
  * ì˜ˆì‹œ: `needs.job1.result == 'success'` (job1ì´ ì„±ê³µí•œ ê²½ìš°)

<br>

---

## ğŸ’¬ ìŠ¬ë™ìœ¼ë¡œ ì•Œë¦¼ ì„¤ì •í•˜ê¸°(Secrets ì‚¬ìš©í•´ë³´ê¸°)

**ì‹œí¬ë¦¿(Secrets)**ì˜ ì‚¬ìš©ë²•ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤. CI/CD íŒŒì´í”„ë¼ì¸ì„ êµ¬ì„±í•˜ë©´ ëŒ€ë¶€ë¶„ ê²½ìš° **ì™¸ë¶€ API, ì„œë²„ ë“±ê³¼ ìš”ì²­/ì‘ë‹µì„ ì£¼ê³  ë°›ëŠ” ê³¼ì •ì´ í¬í•¨**ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ API ë˜ëŠ” ì„œë²„ì™€ í†µì‹ í•˜ê¸° ìœ„í•´ì„œ **YAML** íŒŒì¼ì— URL ë˜ëŠ” API í‚¤ë¥¼ **ê·¸ëŒ€ë¡œ í•˜ë“œ ì½”ë”©í•˜ëŠ” ê²ƒì€ ë³´ì•ˆì— ë¯¼ê°í•œ ì •ë³´ë¥¼ ê·¸ëŒ€ë¡œ ë…¸ì¶œì‹œí‚¤ëŠ” ê²ƒ**ì…ë‹ˆë‹¤.ì‹œí¬ë¦¿ì€ **API í‚¤, URL, ë¹„ë°€ë²ˆí˜¸ì™€ ê°™ì€ ë¯¼ê°í•œ ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ë³´ê´€**í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.

CI íŒŒì´í”„ë¼ì¸ì´ **ì‹¤íŒ¨í•˜ê±°ë‚˜ ì„±ê³µí•˜ë©´ Slack Notificationì„ ë³´ë‚´ëŠ” ê¸°ëŠ¥ì„ ì¶”ê°€**í•´ë³´ë©´ì„œ ì‹œí¬ë¦¿ì„ ì‚¬ìš©í•´ë´…ì‹œë‹¤.

<br>

### ìŠ¬ë™ ì±„ë„ ì¶”ê°€

ë¨¼ì € ì‚¬ìš©í•  ìŠ¬ë™ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ë‚´ì—ì„œ **ì•Œë¦¼ì„ ë°›ì„ ì±„ë„ì„ ê°œì„¤**í•©ë‹ˆë‹¤(í•„ìš”í•œ ê²½ìš° ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ë¶€í„° ë§Œë“¤ì–´ìš”).

<br>

![cifail2](./img/README/slackchannel-5650397.png)

<p align="center">ìŠ¬ë™ ì±„ë„ ê°œì„¤</p>

* `cicd íŒŒì´í”„ë¼ì¸ í…ŒìŠ¤íŠ¸`ë¼ëŠ” ì±„ë„ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤

<br>

---

### ìŠ¬ë™ ì•± ìƒì„±: Webhook URL ë°œê¸‰

GitHub Actionì„ ì´ìš©í•œ íŒŒì´í”„ë¼ì¸ì˜ í†µê³¼ ì—¬ë¶€ì— ëŒ€í•œ ê²°ê³¼ë¥¼ ë°›ê¸° ìœ„í•´ì„œ **ìŠ¬ë™ ì•±**ì„ ë§Œë“¤ê³  **Slack Webhook URL**ì„ í†µí•´ ì—°ë™í•  ê²ƒì…ë‹¤. ì´ **Webhook URL**ì´ ìš°ë¦¬ê°€ ë³´ê´€í•  ì‹œí¬ë¦¿ì´ ë  ê²ë‹ˆë‹¤.

ë‹¤ìŒ ë§í¬ì— ë“¤ì–´ê°€ì„œ ìŠ¬ë™ ì•±ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. [https://api.slack.com/apps](https://api.slack.com/apps)

**Create New App**ì„ ëˆ„ë¥´ê³  **From Scratch**ë¥¼ ê³ ë¦…ë‹ˆë‹¤.

<br>

![cifail2](./img/README/createapp.png)

<p align="center">ìŠ¬ë™ ì•± ìƒì„±</p>

* ì•±ì˜ ì´ë¦„ê³¼ ì•±ì„ ì‚¬ìš©í•  ì›Œí¬ìŠ¤í˜ì´ìŠ¤-ì±„ë„ì„ ì„ íƒí•©ë‹ˆë‹¤

<br>

---

### ì‹œí¬ë¦¿ ë“±ë¡

ì•±ì˜ ìƒì„±ì„ ì™„ë£Œí–ˆìœ¼ë©´, í•´ë‹¹ ì•±ì˜ ì„¤ì • í˜ì´ì§€ì—ì„œ **Incoming Webhooks**ë¥¼ ì„ íƒí•˜ê³  í™œì„±í™” ì‹œí‚µë‹ˆë‹¤. ê·¸ë¦¬ê³  **Webhook URL**ì„ ë³µì‚¬í•©ë‹ˆë‹¤.

<br>

![cifail2](./img/README/appmain.png)

<p align="center">Webhook URL ë³µì‚¬</p>

<br>

ë³µì‚¬í•œ **Webhook URL**ì€ ê¹ƒí—™ ë ˆí¬ì§€í† ë¦¬ì˜ **Settings > Secrets and variables > Actions**ì— ë“¤ì–´ê°€ì„œ **New repository secret**ì— ì¶”ê°€í•©ë‹ˆë‹¤.

<br>

![cifail2](./img/README/secret.png)

<p align="center">Webhook URLì„ Secretìœ¼ë¡œ ì¶”ê°€</p>

<br>

í•´ë‹¹ ì‹œí¬ë¦¿ì€ GitHub Action ì›Œí¬í”Œë¡œìš°ì—ì„œ `${{ secrets.SLACK_WEBHOOK_URL }}`ê³¼ ê°™ì€ í˜•íƒœë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

---

### ì›Œí¬í”Œë¡œìš° ì‘ì„±1: `slack-github-action`(í˜„ì¬ ë²„ê·¸ ìˆìŒ)

ì´ì œ ê¸°ì¡´ì˜ `ci.yml`ì— ìŠ¬ë™ ì•Œë¦¼ì„ ë³´ë‚´ëŠ” ì‘ì—…ì„ ì¶”ê°€í•´ë´…ì‹œë‹¤. [slackapi/slack-github-action](https://github.com/slackapi/slack-github-action)ì„ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.

<br>

> **ë²„ê·¸**
>
> í˜„ì¬ ì´ ë°©ë²•ì€ `payload-file-path`ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° í•„ë“œê°€ `???`ë¡œ í‘œì‹œë˜ëŠ” ë²„ê·¸ê°€ ìˆìŠµë‹ˆë‹¤!
>
> [159#discussion](https://github.com/slackapi/slack-github-action/pull/159#discussion_r1120736821) ì°¸ê³ 

<br>

```yaml
# 6. ìŠ¬ë™ ì±„ë„ë¡œ ë¹Œë“œì˜ ì„±ê³µ ë˜ëŠ” ì‹¤íŒ¨ì— ë”°ë¼ ì•Œë¦¼ ë³´ë‚´ê¸°
# ì„±ê³µì‹œ ìŠ¬ë™ ì•ŒëŒ ë³´ë‚´ê¸°
- name: Notify Slack on Success
  if: success() # ì´ì „ ìŠ¤í…ì´ ëª¨ë‘ ì„±ê³µí•˜ë©´ í•´ë‹¹ ìŠ¤í…ì„ ì‹¤í–‰í•˜ëŠ” ì¡°ê±´ë¬¸
  id: slack-success
  uses: slackapi/slack-github-action@v1.27.0
  with:
    payload-file-path: "./slack/success-payload-content.json" # ë¯¸ë¦¬ ì •ì˜ëœ json íŒŒì¼ì— payloadë¥¼ ì •ì˜í•´ì„œ ì‚¬ìš©ê°€ëŠ¥
    # payloadë¥¼ json í˜•íƒœë¡œ ì§ì ‘ ì œê³µí•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤
    # payloadëŠ” payload-file-path ë³´ë‹¤ ë†’ì€ ìš°ì„ ìˆœìœ„ë¥¼ ê°€ì§„ë‹¤
    # payload: |
    #      {
    #        "key": "value",
    #        "foo": "bar"
    #      }
  env:
    SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
    SLACK_WEBHOOK_TYPE: INCOMING_WEBHOOK
# ì‹¤íŒ¨ì‹œ ìŠ¬ë™ ì•ŒëŒ ë³´ë‚´ê¸°
- name: Notify Slack on Failure
  if: failure() # ì´ì „ ìŠ¤í… ì¤‘ í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨í•˜ë©´ í•´ë‹¹ ìŠ¤í…ì„ ì‹¤í–‰í•˜ëŠ” ì¡°ê±´ë¬¸
  id: slack-failure
  uses: slackapi/slack-github-action@v1.27.0
  with:
    payload-file-path: "./slack/failure-payload-content.json"
  env:
    SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
    SLACK_WEBHOOK_TYPE: INCOMING_WEBHOOK
```

* íŒŒì´í”„ë¼ì¸ ì„±ê³µê³¼ ì‹¤íŒ¨ë¥¼ ë‚˜ëˆ„ì–´ì„œ `success-payload-content.json`ì™€ `failure-payload-content.json`ë¥¼ ë”°ë¡œ ì •ì˜í•´ì„œ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤
* `payload` í•„ë“œë¥¼ ì‚¬ìš©í•´ì„œ ë°”ë¡œ ì •ì˜í•´ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ë„ ì¡´ì¬í•©ë‹ˆë‹¤(í˜„ì¬ ì´ ë°©ë²•ì€ ë²„ê·¸ê°€ ì—†ìŒ)

<br>

ê·¸ëŸ¬ë©´  `success-payload-content.json`ì„ í•œë²ˆ ì‚´í´ë´…ì‹œë‹¤.

```yaml
{
  "channel": "C07L4BQTKGE",
  "attachments": [
    {
      "color": "#36a64f",
      "title": "${{ github.repository }}",
      "title_link": "https://github.com/${{github.repository}}",
      "text": "âœ… CI/CD íŒŒì´í”„ë¼ì¸ ì„±ê³µ",
      "fields": [
        {
          "title": "Repository",
          "value": "${{ github.repository }}",
          "short": true
        },
        {
          "title": "Tag",
          "value": "${{ github.ref_name }}",
          "short": true
        },
        {
          "title": "Commit",
          "value": "${{ github.sha }}",
          "short": true
        },
        {
          "title": "Commit Message",
          "value": "${{ github.event.head_commit.message }}",
          "short": true
        },
        {
          "title": "Author",
          "value": "${{ github.event.head_commit.author.name }}",
          "short": true
        }
      ]
    }
  ]
}
```

* ìœ„ ì¼€ì´ìŠ¤ì—ì„œëŠ” ì±„ë„ IDë¥¼ ê·¸ëŒ€ë¡œ ë…¸ì¶œí–ˆì§€ë§Œ, í•´ë‹¹ IDë„ ì‹œí¬ë¦¿ì— ë“±ë¡í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤

<br>

ì´ ë°©ë²•ì˜ ê²½ìš° ì•„ë˜ ì²˜ëŸ¼ í•„ë“œê°€ `???`ë¡œ ëœë”ë§ ë²„ê·¸ê°€ ìˆìŠµë‹ˆë‹¤.

(`@v1.27.0` ê¸°ì¤€. Maintainerë“¤ì´ í˜„ì¬ í•´ê²° ë°©ë²•ì„ ì°¾ì•„ë³´ê³  ìˆëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì–¸ì œ í•´ê²° ë ì§€ëŠ” ğŸ˜­)

<br>

![cifail2](./img/README/actionbug.png)

<br>

---

### ì›Œí¬í”Œë¡œìš° ì‘ì„±2: `slack-github-action`(ë²„ê·¸ ìš°íšŒ)

> **ë²„ê·¸ ìš°íšŒ(Workaround)**
>
> ì´ ë°©ë²•ì€ ë²„ê·¸ í•´ê²°ì´ ì•„ë‹Œ ìš°íšŒí•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.
>
> [Problems persist using payload file #203](https://github.com/slackapi/slack-github-action/issues/203) ì°¸ê³ 

<br>

ì´ìŠˆì—ì„œ ë‚˜ì˜¨ ìš°íšŒ ë°©ë²•ì„ ê·¸ëŒ€ë¡œ ì²¨ë¶€í–ˆìŠµë‹ˆë‹¤.



<details>
  <summary>ci.yml</summary>

```yaml
# ì¶”ê°€ 1
env:
  PULL_REQUEST_TITLE: ${{ github.event.pull_request.title }}
  PULL_REQUEST_URL: ${{ github.event.pull_request.html_url }}
  PULL_REQUEST_AUTHOR: ${{ github.event.pull_request.user.login }}
  PULL_REQUEST_EVENT_NAME: ${{ github.event_name }}
  PULL_REQUEST_LOGS_URL: ${{ github.event.repository.html_url }}/actions/runs/${{ github.run_id }}
  PULL_REQUEST_COMMIT_URL: ${{ github.event.pull_request.head.repo.html_url }}/commit/${{ github.event.pull_request.head.sha }}
  
jobs:
  # Build Job
  build:
    runs-on: ubuntu-latest
			
    steps:
    # ê¸°ì¡´ Step
    
      # ì¶”ê°€ 2
      - name: Slack message with build result
        if: success() || failure()
        uses: slackapi/slack-github-action@v1.27.0
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
          SLACK_WEBHOOK_TYPE: INCOMING_WEBHOOK
          PULL_REQUEST_JOB_STATUS: ${{ job.status }}
          PULL_REQUEST_JOB_STATUS_COLOR: ${{ job.status == 'success' && vars.COLOR_GREEN || job.status == 'failure' && vars.COLOR_RED || vars.COLOR_ORANGE }}
        with:
          channel-id: C07L4BQTKGE
          payload-file-path: ./slack/ci_slack_message.json
```

</details>



<details>
  <summary>ci_slack_message.json</summary>

```yaml
{
  "attachments": [
    {
      "color": "${{ env.PULL_REQUEST_JOB_STATUS_COLOR }}",
      "fallback": "test",
      "blocks": [
        {
          "type": "section",
          "fields": [
            {
              "type": "mrkdwn",
              "text": "*Pull Request:*\n<${{ env.PULL_REQUEST_URL }}|${{ env.PULL_REQUEST_TITLE }}>"
            },
            {
              "type": "mrkdwn",
              "text": "*Status:*\n`${{ env.PULL_REQUEST_JOB_STATUS }}`"
            }
          ]
        },
        {
          "type": "section",
          "fields": [
            {
              "type": "mrkdwn",
              "text": "*Author:*\n`${{ env.PULL_REQUEST_AUTHOR }}`"
            },
            {
              "type": "mrkdwn",
              "text": "*Event:*\n`${{ env.PULL_REQUEST_EVENT_NAME }}`"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "actions",
          "elements": [
            {
              "type": "button",
              "text": {
                "type": "plain_text",
                "text": "Logs"
              },
              "url": "${{ env.PULL_REQUEST_LOGS_URL }}"
            },
            {
              "type": "button",
              "text": {
                "type": "plain_text",
                "text": "Commit"
              },
              "url": "${{ env.PULL_REQUEST_COMMIT_URL }}"
            }
          ]
        }
      ]
    }
  ]
}
```

</details>

<br>

ì´ ê²½ìš° ë‹¤ìŒê³¼ ê°™ì´ í‘œì‹œë©ë‹ˆë‹¤.

<br>

![cifail2](./img/README/bugworkaround.png)

<br>

---

### ì›Œí¬í”Œë¡œìš° ì‘ì„±3: `action-slack`

ì´ë²ˆì—ëŠ” ë” ê°„í¸í•œ ë°©ë²•ì¸ [8398a7/action-slack](https://github.com/8398a7/action-slack)ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤.

ì•„ë˜ì˜ **Step**ë§Œ ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤.

<br>

```yaml
- name: Slack message with build result
  if: always() # ì´ì „ì˜ Stepë“¤ì˜ ì„±ê³µê³¼ ì‹¤íŒ¨ ì—¬ë¶€ì— ìƒê´€ ì—†ì´ í•­ìƒ ì‹¤í–‰
  uses: 8398a7/action-slack@v3
  with:
    status: ${{ job.status }}
    fields: repo,message,commit,author,action,eventName,ref,workflow,job,took
    if_mention: failure,cancelled
  env:
    SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
```

<br>

ë‹¤ìŒê³¼ ê°™ì€ ìŠ¬ë™ ì•ŒëŒì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

![cifail2](./img/README/action-slack.png)

<br>

ì´ ë°©ë²•ì€ ê°„í¸í•˜ì§€ë§Œ `slack-github-action`ì— ë¹„í•´ í•„ë“œë¥¼ ì›í•˜ëŠ”ë°ë¡œ ì»¤ìŠ¤í„°ë§ˆì´ì§• í•˜ê¸°ê°€ ì–´ë µë‹¤ëŠ” ë‹¨ì ì´ ìˆìŠµë‹ˆë‹¤.

<br>

---

## ğŸ“‘ Reference

1. [https://pozafly.github.io/dev-ops/cache-and-restore-keys-in-github-actions/](https://pozafly.github.io/dev-ops/cache-and-restore-keys-in-github-actions/)
2. [https://fe-developers.kakaoent.com/2022/220106-github-actions/](https://fe-developers.kakaoent.com/2022/220106-github-actions/)
3. [https://hyperconnect.github.io/2021/11/08/github-actions-for-everyone-1.html](https://hyperconnect.github.io/2021/11/08/github-actions-for-everyone-1.html)
4. [https://github.com/8398a7/action-slack](https://github.com/8398a7/action-slack)
5. [https://github.com/slackapi/slack-github-action](https://github.com/slackapi/slack-github-action)
